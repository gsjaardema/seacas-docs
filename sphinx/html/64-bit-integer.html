

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Integer Bulkdata Storage Details &mdash; SEACAS 2021/03/02 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SEACAS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Integer Bulkdata Storage Details</a></li>
<li><a class="reference internal" href="#ioss-io-system-libraries">IOSS: IO System libraries</a></li>
<li><a class="reference internal" href="#seacas-applications">SEACAS Applications</a></li>
<li><a class="reference internal" href="#availability">AVAILABILITY:</a></li>
<li><a class="reference internal" href="#other-details">Other Details:</a></li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SEACAS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Integer Bulkdata Storage Details</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/64-bit-integer.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="integer-bulkdata-storage-details">
<h1>Integer Bulkdata Storage Details<a class="headerlink" href="#integer-bulkdata-storage-details" title="Permalink to this headline">¶</a></h1>
<p>The EXODUS database can store integer bulk data, entity map data, and
mesh entity (block/set) ids in either 32-bit or 64-bit integer format. The data
considered “bulk data” are:</p>
<ul class="simple">
<li><p>element, face, and edge connectivity lists,</p></li>
<li><p>element, face, edge, and node set entity lists,</p></li>
</ul>
<p>The entity map data is any data stored in one of the ‘map’ objects on
the exodus file.  This includes:</p>
<ul class="simple">
<li><p>id maps</p></li>
<li><p>number maps</p></li>
<li><p>order maps</p></li>
<li><p>processor node maps</p></li>
<li><p>processor element maps.</p></li>
</ul>
<p>A mesh entity id is the id of any block (element block, edge block,
…); set (node set, face set, …), coordinate frame, and
communication map.</p>
<p>When an EXODUS file is created via the <code class="docutils literal notranslate"><span class="pre">ex_create()</span></code> function, the
‘mode’ argument provides the method for specifying how integer data
will be passed as arguments to the API functions and also how the
integer data will be stored on the database. The <code class="docutils literal notranslate"><span class="pre">ex_open()</span></code> function
provides the same method for specifying how integer data will be
passed as arguments to the API functions.</p>
<p>The method uses the ‘mode’ argument to the <code class="docutils literal notranslate"><span class="pre">ex_open()</span></code> and
<code class="docutils literal notranslate"><span class="pre">ex_create()</span></code> functions. The mode is a 32-bit integer in which certain
bits are turned on by or’ing certain predefined constants.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exoid</span> <span class="o">=</span> <span class="n">ex_create</span><span class="p">(</span> <span class="n">EX_TEST_FILENAME</span><span class="p">,</span>
		   <span class="n">EX_CLOBBER</span><span class="o">|</span><span class="n">EX_MAPS_INT64_DB</span><span class="o">|</span><span class="n">EX_MAPS_INT64_API</span><span class="p">,</span>
		   <span class="o">&amp;</span><span class="n">appWordSize</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">diskWordSize</span> <span class="p">);</span>
</pre></div>
</div>
<p>The constants related to the integer size (32-bit or 64-bit) specification are:</p>
<p>Constant           | Description
——————-|————–
<code class="docutils literal notranslate"><span class="pre">EX_MAPS_INT64_DB</span></code>  | entity map data
<code class="docutils literal notranslate"><span class="pre">EX_IDS_INT64_DB</span></code>   | mesh entity ids
<code class="docutils literal notranslate"><span class="pre">EX_BULK_INT64_DB</span></code>  | bulk data
<code class="docutils literal notranslate"><span class="pre">EX_ALL_INT64_DB</span></code>   | (the above 3 or’d together)
<code class="docutils literal notranslate"><span class="pre">EX_MAPS_INT64_API</span></code> | entity map data
<code class="docutils literal notranslate"><span class="pre">EX_IDS_INT64_API</span></code>  | mesh entity ids
<code class="docutils literal notranslate"><span class="pre">EX_BULK_INT64_API</span></code> | bulk data
<code class="docutils literal notranslate"><span class="pre">EX_ALL_INT64_API</span></code>  | (the above 3 or’d together)</p>
<p>The constants that end with <code class="docutils literal notranslate"><span class="pre">_DB</span></code> specify that that particular integer
data is stored on the database as 64-bit integers; the constants that
end with <code class="docutils literal notranslate"><span class="pre">_API</span></code> specify that that particular integer data is passed
to/from API functions as 64-bit integers.</p>
<p>If the range of the data being transmitted is larger than the
permitted integer range (for example, if the data is stored on the
database truly requires 64-bit ints and the application specifies
passing data as 32-bit ints), the api function will return an error.</p>
<p>The three types of integer data whose storage can be specified are:</p>
<ul class="simple">
<li><p>maps (<code class="docutils literal notranslate"><span class="pre">EX_MAPS_INT64_</span></code>),</p></li>
<li><p>“bulk data” including connectivity lists and entity lists
(<code class="docutils literal notranslate"><span class="pre">EX_BULK_INT64_</span></code>), and</p></li>
<li><p>entity ids which are the ids of element, face, edge, and node
sets and blocks; and map ids (<code class="docutils literal notranslate"><span class="pre">EX_IDS_INT64_</span></code>)</p></li>
</ul>
<p>The function <code class="docutils literal notranslate"><span class="pre">ex_int64_status(exoid)</span></code> is used to determine the integer
storage types being used for the EXODUS database ‘exoid’. The function
returns an integer which can be and’ed with the above flags to
determine either the storage type or function parameter type.</p>
<p>For example, if</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>	<span class="p">(</span><span class="n">EX_MAPS_INT64_DB</span> <span class="o">&amp;</span> <span class="n">ex_int64_status</span><span class="p">(</span><span class="n">exoid</span><span class="p">))</span>
</pre></div>
</div>
<p>is true, then map data is being stored as 64-bit integers for that database.</p>
<p>It is not possible to determine the integer data size on a database
without opening the database via an <code class="docutils literal notranslate"><span class="pre">ex_open()</span></code> call. However, the
integer size specification for API functions can be changed at any
time via the <code class="docutils literal notranslate"><span class="pre">ex_set_int64_status(exoid,</span> <span class="pre">mode)</span></code> function. The mode is
one or more of <code class="docutils literal notranslate"><span class="pre">EX_MAPS_INT64_API</span></code>, <code class="docutils literal notranslate"><span class="pre">EX_IDS_INT64_API</span></code>, or
<code class="docutils literal notranslate"><span class="pre">EX_BULK_INT64_API</span></code>, or’d together.  Any exodus function calls after
that point will use the specified integer size. Note that a call to
<code class="docutils literal notranslate"><span class="pre">ex_set_int64_status(exoid,</span> <span class="pre">mode)</span></code> overrides any previous setting for
the integer sizes used in the API.  The <code class="docutils literal notranslate"><span class="pre">ex_create()</span></code> function is the
only way to specify the size of the integers that will be written to a database.</p>
</div>
<div class="section" id="ioss-io-system-libraries">
<h1>IOSS: IO System libraries<a class="headerlink" href="#ioss-io-system-libraries" title="Permalink to this headline">¶</a></h1>
<p>The IO System (Ioss) is also 64-bit integer capable.  When Ioss opens
and reads the intial metadata from an exodus file, it will determine
the size of integers stored on the database. If either ‘maps’ or ‘bulk
data’ are stored as 64-bit integers, then Ioss will automatically
specify that all integers will be transferred as 64-bit integers.
Entity (block/set) ids are always treated as 64-bit integers in Ioss.</p>
<p>The setting can be queried via the <em>Ioss::DatabaseIO</em>
<code class="docutils literal notranslate"><span class="pre">int_byte_size_api()</span></code> member function call which will return either 4 or
8. The setting can be modified via the <code class="docutils literal notranslate"><span class="pre">set_int_byte_size_api(mode)</span></code>
function call where mode is one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Ioss::USE_INT64_API</span></code> or</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Ioss::USE_INT32_API</span></code>.</p></li>
</ul>
<p>The integer byte size setting should only be changed prior to assiging
the database to an <em>Ioss::Region</em> since fields are created using the
setting when the meta data of the database is read.  An <em>Ioss::Field</em>
that stores 64-bit integers will have a type of <code class="docutils literal notranslate"><span class="pre">Ioss::Field::INT64</span></code>
and a field that stores 32-bit integers will have a type of
<code class="docutils literal notranslate"><span class="pre">Ioss::Field::INTEGER</span></code> (<code class="docutils literal notranslate"><span class="pre">Ioss::Field::INT32</span></code> can also be used).</p>
<p>The Ioss io_shell application will maintain the integer size of the
input database to the output database by default.  If the <code class="docutils literal notranslate"><span class="pre">--64</span></code>
option is specified, then the output database will use 64-bit integers
for all quantities.</p>
</div>
<div class="section" id="seacas-applications">
<h1>SEACAS Applications<a class="headerlink" href="#seacas-applications" title="Permalink to this headline">¶</a></h1>
<p>Many of the SEACAS applications have been modified to be 64-bit
capable. They include:</p>
<ul class="simple">
<li><p>conjoin</p></li>
<li><p>ejoin</p></li>
<li><p>epu</p></li>
<li><p>exodiff</p></li>
<li><p>nem_spread</p></li>
<li><p>nem_slice – Note that only the linear, random, or scattered
decomposition options are allowed for 64-bit integer
meshes. Other options are being investigated for the
slicing of large meshes.</p></li>
<li><p>algebra, blot, exotxt, gen3d, genshell, gjoin, grepos, explore,
mapvar, numbers, txtexo</p></li>
</ul>
</div>
<div class="section" id="availability">
<h1>AVAILABILITY:<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h1>
<p>The 64-bit integer capability is currently available in the following
locations:</p>
<ul class="simple">
<li><p>SEACAS repository https://github.com/gsjaardema/seacas.git</p></li>
<li><p>Sierra repository (Internal)</p></li>
<li><p>Trilinos repository https://github.com/trilinos/Trilinos</p></li>
</ul>
</div>
<div class="section" id="other-details">
<h1>Other Details:<a class="headerlink" href="#other-details" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Exodus requires netcdf-4.1.2 or later; netcdf-4.3.3.1 or later is recommended</p></li>
<li><p>The Nemesis library has been absorbed into the exodus library.</p>
<ul>
<li><p>All api functions that were <code class="docutils literal notranslate"><span class="pre">ne_*</span></code> are now <code class="docutils literal notranslate"><span class="pre">ex_*</span></code></p></li>
<li><p>A wrapper exists in the old nemesis library that will forward all
<code class="docutils literal notranslate"><span class="pre">ne_*</span></code> calls to the corresponding <code class="docutils literal notranslate"><span class="pre">ex_*</span></code> call to maintain backward
compatability with unconverted applications.</p></li>
<li><p>In other words, we recommend using the exodus library for nemesis
routines, but the nemesis library can be used if you want.</p></li>
</ul>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Gregory Sjaardema.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>